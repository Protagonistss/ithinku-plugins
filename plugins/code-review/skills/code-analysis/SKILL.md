---
name: code-analysis
description: ä»£ç è´¨é‡ä¸å¤æ‚åº¦ç­‰é™æ€åˆ†æèƒ½åŠ›ï¼Œæä¾›æ”¹è¿›å»ºè®®ä¸æŠ¥å‘Šã€‚
---

# Skill: Code Analysis

ä¸“ä¸šçš„ä»£ç åˆ†ææŠ€èƒ½ï¼Œèƒ½å¤Ÿæ·±å…¥è¯„ä¼°ä»£ç è´¨é‡ã€è¯†åˆ«æ½œåœ¨é—®é¢˜å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚

## æŠ€èƒ½æè¿°

Code Analysis æŠ€èƒ½æä¾›å…¨é¢çš„ä»£ç é™æ€åˆ†æèƒ½åŠ›ï¼ŒåŒ…æ‹¬ä»£ç è´¨é‡è¯„ä¼°ã€å¤æ‚åº¦åˆ†æã€ä»£ç é‡å¤æ£€æµ‹å’Œæœ€ä½³å®è·µæ£€æŸ¥ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. ä»£ç è´¨é‡è¯„ä¼°
- **å¯è¯»æ€§åˆ†æ**: è¯„ä¼°ä»£ç çš„æ¸…æ™°åº¦å’Œæ˜“ç†è§£æ€§
- **å‘½åè§„èŒƒ**: æ£€æŸ¥å˜é‡ã€å‡½æ•°ã€ç±»çš„å‘½åæ˜¯å¦åˆç†
- **ä»£ç ç»“æ„**: åˆ†æä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–ç¨‹åº¦
- **æ³¨é‡Šè´¨é‡**: è¯„ä¼°æ³¨é‡Šçš„å®Œæ•´æ€§å’Œæœ‰æ•ˆæ€§

### 2. å¤æ‚åº¦åˆ†æ
- **åœˆå¤æ‚åº¦**: è®¡ç®—ä»£ç çš„çº¿æ€§ç‹¬ç«‹è·¯å¾„æ•°é‡
- **è®¤çŸ¥å¤æ‚åº¦**: è¯„ä¼°ä»£ç ç†è§£çš„éš¾æ˜“ç¨‹åº¦
- **åµŒå¥—æ·±åº¦**: æ£€æŸ¥ä»£ç çš„åµŒå¥—å±‚çº§
- **å‡½æ•°é•¿åº¦**: åˆ†æå‡½æ•°çš„è¡Œæ•°å’ŒèŒè´£

### 3. ä»£ç é‡å¤æ£€æµ‹
- **é‡å¤ä»£ç **: è¯†åˆ«ç›¸ä¼¼çš„ä»£ç ç‰‡æ®µ
- **å¤åˆ¶ç²˜è´´**: æ£€æµ‹å¯èƒ½çš„å¤åˆ¶ç²˜è´´ä»£ç 
- **é‡æ„æœºä¼š**: å»ºè®®å°†é‡å¤ä»£ç æå–ä¸ºå‡½æ•°

### 4. æœ€ä½³å®è·µæ£€æŸ¥
- **è®¾è®¡æ¨¡å¼**: è¯†åˆ«å’Œè¯„ä¼°è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨
- **SOLIDåŸåˆ™**: æ£€æŸ¥æ˜¯å¦è¿åSOLIDåŸåˆ™
- **é”™è¯¯å¤„ç†**: è¯„ä¼°å¼‚å¸¸å¤„ç†çš„å®Œæ•´æ€§
- **èµ„æºç®¡ç†**: æ£€æŸ¥èµ„æºçš„æ­£ç¡®é‡Šæ”¾

## æ”¯æŒçš„è¯­è¨€

- **JavaScript/TypeScript**: ES6+ã€Node.jsã€Reactã€Vue
- **Python**: Python 3.xã€Djangoã€Flask
- **Java**: Java 8+ã€Spring Boot
- **C#**: .NET Coreã€ASP.NET
- **Go**: æ ‡å‡†åº“å’Œå¸¸ç”¨æ¡†æ¶
- **Ruby**: Ruby on Rails
- **PHP**: Laravelã€Symfony

## åˆ†æç»´åº¦

### åŠŸèƒ½æ€§
- [ ] é€»è¾‘æ­£ç¡®æ€§
- [ ] è¾¹ç•Œæ¡ä»¶å¤„ç†
- [ ] å¼‚å¸¸æƒ…å†µå¤„ç†
- [ ] ä¸šåŠ¡é€»è¾‘å®ç°

### å¯ç»´æŠ¤æ€§
- [ ] ä»£ç æ¨¡å—åŒ–
- [ ] è€¦åˆåº¦è¯„ä¼°
- [ ] å†…èšæ€§æ£€æŸ¥
- [ ] æ‰©å±•æ€§åˆ†æ

### å¯æµ‹è¯•æ€§
- [ ] å•å…ƒæµ‹è¯•å‹å¥½åº¦
- [ ] ä¾èµ–æ³¨å…¥ä½¿ç”¨
- [ ] Mockå¯¹è±¡æ”¯æŒ
- [ ] æµ‹è¯•è¦†ç›–å»ºè®®

### æ€§èƒ½
- [ ] ç®—æ³•æ•ˆç‡
- [ ] å†…å­˜ä½¿ç”¨
- [ ] I/Oæ“ä½œä¼˜åŒ–
- [ ] å¹¶å‘å®‰å…¨æ€§

## è´¨é‡è¯„åˆ†ç³»ç»Ÿ

### è¯„åˆ†ç»´åº¦ï¼ˆæ¯é¡¹10åˆ†ï¼‰

1. **å¯è¯»æ€§ (Readability)**
   - 9-10åˆ†: ä»£ç å¦‚æ–‡æ¡£èˆ¬æ¸…æ™°
   - 7-8åˆ†: æ•´ä½“æ¸…æ™°ï¼Œå°‘æ•°åœ°æ–¹éœ€è¦æ³¨é‡Š
   - 5-6åˆ†: åŸºæœ¬å¯è¯»ï¼Œéœ€è¦æ”¹è¿›å‘½åå’Œç»“æ„
   - 3-4åˆ†: éš¾ä»¥ç†è§£ï¼Œéœ€è¦å¤§é‡æ³¨é‡Š
   - 1-2åˆ†: å‡ ä¹æ— æ³•ç†è§£

2. **å¤æ‚æ€§ (Complexity)**
   - 9-10åˆ†: ç»“æ„ç®€å•ï¼Œæ˜“äºç†è§£
   - 7-8åˆ†: é€‚ä¸­å¤æ‚åº¦ï¼Œé€»è¾‘æ¸…æ™°
   - 5-6åˆ†: åå¤æ‚ï¼Œéƒ¨åˆ†é€»è¾‘éœ€è¦é‡æ„
   - 3-4åˆ†: è¿‡äºå¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤
   - 1-2åˆ†: æåº¦å¤æ‚ï¼Œå¿…é¡»é‡æ„

3. **å¯ç»´æŠ¤æ€§ (Maintainability)**
   - 9-10åˆ†: æ˜“äºä¿®æ”¹å’Œæ‰©å±•
   - 7-8åˆ†: è¾ƒæ˜“ç»´æŠ¤ï¼Œæ”¹åŠ¨å½±å“å¯æ§
   - 5-6åˆ†: ç»´æŠ¤æœ‰ä¸€å®šéš¾åº¦
   - 3-4åˆ†: éš¾ä»¥ç»´æŠ¤ï¼Œæ”¹åŠ¨é£é™©å¤§
   - 1-2åˆ†: å‡ ä¹æ— æ³•ç»´æŠ¤

4. **å¥å£®æ€§ (Robustness)**
   - 9-10åˆ†: å¼‚å¸¸å¤„ç†å®Œå–„
   - 7-8åˆ†: ä¸»è¦å¼‚å¸¸æœ‰å¤„ç†
   - 5-6åˆ†: åŸºæœ¬å¼‚å¸¸å¤„ç†
   - 3-4åˆ†: å¼‚å¸¸å¤„ç†ä¸è¶³
   - 1-2åˆ†: å‡ ä¹æ²¡æœ‰å¼‚å¸¸å¤„ç†

## åˆ†ææŠ¥å‘Šæ¨¡æ¿

```markdown
# ä»£ç åˆ†ææŠ¥å‘Š

## åŸºæœ¬ä¿¡æ¯
- **æ–‡ä»¶è·¯å¾„**: src/components/UserProfile.jsx
- **è¯­è¨€**: JavaScript/React
- **ä»£ç è¡Œæ•°**: 245è¡Œ
- **å‡½æ•°æ•°é‡**: 8ä¸ª
- **åˆ†ææ—¶é—´**: 2024-01-15 14:30:00

## è´¨é‡è¯„åˆ†
| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|-----|------|------|
| å¯è¯»æ€§ | 7.5/10 | æ•´ä½“æ¸…æ™°ï¼Œéƒ¨åˆ†å˜é‡åéœ€è¦æ”¹è¿› |
| å¤æ‚æ€§ | 6.0/10 | å‡½æ•°è¾ƒé•¿ï¼ŒåµŒå¥—è¾ƒæ·± |
| å¯ç»´æŠ¤æ€§ | 6.5/10 | è€¦åˆåº¦é€‚ä¸­ï¼Œéœ€è¦æ›´å¥½çš„æ¨¡å—åŒ– |
| å¥å£®æ€§ | 5.0/10 | ç¼ºå°‘è¾¹ç•Œæ¡ä»¶å¤„ç† |

## è¯¦ç»†åˆ†æ

### ğŸŸ¢ ä¼˜ç§€å®è·µ
1. ä½¿ç”¨äº†ç°ä»£ES6+è¯­æ³•
2. ç»„ä»¶ç»“æ„æ¸…æ™°
3. Propsç±»å‹å®šä¹‰å®Œæ•´

### ğŸŸ¡ éœ€è¦æ”¹è¿›
1. å‡½æ•°è¿‡é•¿ï¼ˆç¬¬45-120è¡Œï¼Œ75è¡Œï¼‰
2. åµŒå¥—å±‚çº§è¿‡æ·±ï¼ˆæœ€æ·±4å±‚ï¼‰
3. éƒ¨åˆ†å˜é‡åä¸å¤Ÿæè¿°æ€§

### ğŸ”´ ä¸¥é‡é—®é¢˜
1. ç¼ºå°‘é”™è¯¯è¾¹ç•Œå¤„ç†
2. å†…å­˜æ³„æ¼é£é™©ï¼ˆäº‹ä»¶ç›‘å¬å™¨æœªæ¸…ç†ï¼‰

## æ”¹è¿›å»ºè®®

### 1. é‡æ„é•¿å‡½æ•°
å°† `handleUserUpdate` å‡½æ•°æ‹†åˆ†ä¸ºå¤šä¸ªå°å‡½æ•°ï¼š
```javascript
// å½“å‰ä»£ç ï¼ˆ75è¡Œï¼‰
const handleUserUpdate = async (userData) => {
  // 75è¡Œå¤æ‚é€»è¾‘...
};

// å»ºè®®é‡æ„ä¸º
const validateUserData = (data) => { /* éªŒè¯é€»è¾‘ */ };
const prepareUpdateData = (data) => { /* æ•°æ®å‡†å¤‡ */ };
const updateUserProfile = async (data) => { /* æ›´æ–°é€»è¾‘ */ };
const handleUpdateSuccess = (result) => { /* æˆåŠŸå¤„ç† */ };
const handleUpdateError = (error) => { /* é”™è¯¯å¤„ç† */ };

const handleUserUpdate = async (userData) => {
  try {
    validateUserData(userData);
    const updateData = prepareUpdateData(userData);
    const result = await updateUserProfile(updateData);
    handleUpdateSuccess(result);
  } catch (error) {
    handleUpdateError(error);
  }
};
```

### 2. é™ä½åµŒå¥—å¤æ‚åº¦
ä½¿ç”¨æ—©æœŸè¿”å›å‡å°‘åµŒå¥—ï¼š
```javascript
// æ”¹è¿›å‰
const processUser = (user) => {
  if (user) {
    if (user.active) {
      if (user.verified) {
        // å¤„ç†é€»è¾‘
      }
    }
  }
};

// æ”¹è¿›å
const processUser = (user) => {
  if (!user) return;
  if (!user.active) return;
  if (!user.verified) return;

  // å¤„ç†é€»è¾‘
};
```

## å­¦ä¹ èµ„æº
- [Clean Code - Robert C. Martin](https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350884)
- [Refactoring - Martin Fowler](https://refactoring.com/)
- [JavaScriptæœ€ä½³å®è·µ](https://github.com/ryanmcdermott/clean-code-javascript)
```

## é…ç½®é€‰é¡¹

å¯ä»¥é€šè¿‡ `.code-analysis.json` é…ç½®åˆ†æè§„åˆ™ï¼š

```json
{
  "analysis": {
    "maxFunctionLength": 30,
    "maxNestingDepth": 3,
    "maxComplexity": 10,
    "excludePatterns": [
      "*.test.js",
      "*.spec.js",
      "node_modules/**",
      "dist/**"
    ],
    "rules": {
      "naming": {
        "enabled": true,
        "camelCase": true,
        "snake_case": false
      },
      "complexity": {
        "enabled": true,
        "maxCognitiveComplexity": 15
      },
      "duplicates": {
        "enabled": true,
        "minLines": 5,
        "similarity": 0.8
      }
    }
  }
}
```

## é›†æˆå·¥å…·

### IDEæ’ä»¶
- **SonarLint**: å®æ—¶ä»£ç è´¨é‡æ£€æŸ¥
- **ESLint**: JavaScriptä»£ç è´¨é‡å·¥å…·
- **Pylint**: Pythonä»£ç åˆ†æ
- **Checkstyle**: Javaä»£ç é£æ ¼æ£€æŸ¥

### CI/CDé›†æˆ
```yaml
# GitHub Actions ç¤ºä¾‹
name: Code Analysis
on: [push, pull_request]

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Code Analysis
        run: |
          npm install
          npm run lint
          npm run test:coverage
          npx sonar-scanner
```

## é«˜çº§ç‰¹æ€§

### 1. ä»£ç å¼‚å‘³æ£€æµ‹
- **é•¿æ–¹æ³•**: è¶…è¿‡50è¡Œçš„æ–¹æ³•
- **å¤§ç±»**: è¶…è¿‡300è¡Œçš„ç±»
- **é•¿å‚æ•°åˆ—è¡¨**: è¶…è¿‡5ä¸ªå‚æ•°
- **é‡å¤ä»£ç **: ç›¸ä¼¼åº¦è¶…è¿‡80%çš„ä»£ç ç‰‡æ®µ

### 2. æ¶æ„åˆ†æ
- **å¾ªç¯ä¾èµ–**: æ£€æµ‹æ¨¡å—é—´çš„å¾ªç¯å¼•ç”¨
- **å±‚çº§è¿å**: åˆ†ææ¶æ„å±‚æ¬¡ç»“æ„
- **è€¦åˆåˆ†æ**: è¯„ä¼°æ¨¡å—é—´è€¦åˆåº¦

### 3. æ¼”è¿›åˆ†æ
- **ä»£ç å˜æ›´é¢‘ç‡**: åˆ†æä»£ç çš„ç¨³å®šæ€§
- **ç¼ºé™·å¯†åº¦**: å…³è”ä»£ç å˜æ›´å’ŒbugæŠ¥å‘Š
- **æŠ€æœ¯å€ºåŠ¡**: é‡åŒ–æŠ€æœ¯å€ºåŠ¡æ°´å¹³

## æœ€ä½³å®è·µ

### å¼€å‘é˜¶æ®µ
1. **ç¼–ç å‰**: è®¾è®¡æ¸…æ™°çš„ä»£ç ç»“æ„
2. **ç¼–ç ä¸­**: éµå¾ªç¼–ç è§„èŒƒå’Œæœ€ä½³å®è·µ
3. **ç¼–ç å**: è¿›è¡Œè‡ªæˆ‘ä»£ç å®¡æŸ¥
4. **æäº¤å‰**: è¿è¡Œè‡ªåŠ¨åŒ–åˆ†æå·¥å…·

### å›¢é˜Ÿåä½œ
1. **ç»Ÿä¸€æ ‡å‡†**: å»ºç«‹å›¢é˜Ÿç»Ÿä¸€çš„ç¼–ç è§„èŒƒ
2. **å®šæœŸå®¡æŸ¥**: è¿›è¡Œå®šæœŸçš„ä»£ç å®¡æŸ¥ä¼šè®®
3. **çŸ¥è¯†åˆ†äº«**: åˆ†äº«ä»£ç è´¨é‡æ”¹è¿›ç»éªŒ
4. **æŒç»­æ”¹è¿›**: æ ¹æ®åˆ†æç»“æœæ”¹è¿›å¼€å‘æµç¨‹

## ä½¿ç”¨å»ºè®®

1. **æ¸è¿›å¼æ”¹è¿›**: ä¸éœ€è¦ä¸€æ¬¡æ€§ä¿®å¤æ‰€æœ‰é—®é¢˜
2. **ä¼˜å…ˆçº§æ’åº**: ä¼˜å…ˆä¿®å¤ä¸¥é‡å’Œé«˜ä¼˜å…ˆçº§é—®é¢˜
3. **è‡ªåŠ¨åŒ–é›†æˆ**: å°†åˆ†æå·¥å…·é›†æˆåˆ°å¼€å‘æµç¨‹ä¸­
4. **æŒç»­ç›‘æ§**: å®šæœŸæ£€æŸ¥ä»£ç è´¨é‡è¶‹åŠ¿

é€šè¿‡æŒç»­çš„ä»£ç åˆ†æå’Œæ”¹è¿›ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä»£ç è´¨é‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
